<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="theme-color" content="#f5f5f5"><meta name="mobile-web-app-capable" content="yes"><title>HTMU TTS</title><script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script><style>:root{--bg:#f5f5f5;--card:#ffffff;--text:#333333;--text2:#666666;--group-bg:#e0e0e0;--phrase-bg:#ffffff;--border:#cccccc;--accent:#007AFF;--danger:#ff3b30;--success:#34c759;}*{box-sizing:border-box;margin:0;padding:0;}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;}.voice-load-screen{position:fixed;inset:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000;padding:20px;}.voice-load-screen.hidden{display:none;}.voice-load-screen h1{font-size:28px;margin-bottom:8px;}.voice-load-screen p{color:var(--text2);margin-bottom:32px;}.upload-area{width:100%;max-width:400px;padding:40px;border:2px dashed var(--border);border-radius:16px;text-align:center;cursor:pointer;transition:all 0.2s;}.upload-area:hover{border-color:var(--accent);background:rgba(0,122,255,0.05);}.upload-area.dragging{border-color:var(--accent);background:rgba(0,122,255,0.1);}.upload-icon{font-size:48px;margin-bottom:16px;}.upload-text{font-size:16px;color:var(--text2);margin-bottom:8px;}.upload-hint{font-size:13px;color:#999;}#voiceFileInput{display:none;}.loading-overlay{position:fixed;inset:0;background:rgba(255,255,255,0.9);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1001;}.loading-overlay.hidden{display:none;}.spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite;}@keyframes spin{to{transform:rotate(360deg);}}.loading-text{margin-top:16px;color:var(--text2);font-size:14px;}.header{background:var(--card);padding:12px;border-bottom:1px solid var(--border);}.input-row{display:flex;gap:8px;align-items:stretch;}.input-wrapper{flex:1;position:relative;}.text-input{width:100%;padding:12px;font-size:18px;border:1px solid var(--border);border-radius:8px;outline:none;resize:none;min-height:48px;max-height:100px;}.text-input:focus{border-color:var(--accent);}.suggestions{position:absolute;top:100%;left:0;right:0;background:white;border:1px solid var(--border);border-top:none;border-radius:0 0 8px 8px;max-height:200px;overflow-y:auto;z-index:100;display:none;box-shadow:0 4px 12px rgba(0,0,0,0.15);}.suggestions.active{display:block;}.suggestion-item{padding:10px 12px;cursor:pointer;border-bottom:1px solid #eee;font-size:14px;}.suggestion-item:last-child{border-bottom:none;}.suggestion-item:hover{background:#f0f0f0;}.suggestion-item mark{background:#ffeb3b;padding:0;}.speak-btn{width:56px;background:var(--success);border:none;border-radius:8px;color:white;font-size:22px;cursor:pointer;}.speak-btn:disabled{background:#ccc;cursor:not-allowed;}.clear-btn{width:44px;background:var(--danger);border:none;border-radius:8px;color:white;font-size:18px;cursor:pointer;}.toolbar{display:flex;gap:8px;margin-top:10px;}.toolbar-btn{padding:8px 16px;background:var(--group-bg);border:none;border-radius:6px;color:var(--text);font-size:14px;cursor:pointer;}.toolbar-btn.active{background:var(--accent);color:white;}.breadcrumb{display:flex;align-items:center;gap:4px;padding:8px 12px;background:var(--card);border-bottom:1px solid var(--border);flex-wrap:wrap;min-height:36px;}.breadcrumb-item{padding:4px 10px;background:var(--group-bg);border-radius:4px;font-size:13px;cursor:pointer;}.breadcrumb-item:hover{background:var(--accent);color:white;}.breadcrumb-sep{color:var(--text2);font-size:12px;}.phrase-grid{flex:1;padding:10px;display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:8px;align-content:start;overflow-y:auto;}.phrase-btn{padding:12px 8px;border:1px solid var(--border);border-radius:8px;background:var(--phrase-bg);font-size:13px;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-height:70px;transition:transform 0.1s;color:var(--accent);font-weight:500;}.phrase-btn:active{transform:scale(0.96);}.phrase-btn.group{background:var(--group-bg);color:var(--text);border-color:#bbb;}.phrase-btn .text{word-break:break-word;line-height:1.3;}.status-bar{padding:6px 12px;background:var(--card);border-top:1px solid var(--border);font-size:11px;color:var(--text2);display:flex;justify-content:space-between;align-items:center;}.change-voice-btn{padding:4px 8px;background:var(--group-bg);border:none;border-radius:4px;font-size:11px;cursor:pointer;}.saved-voices{width:100%;max-width:400px;margin-bottom:16px;text-align:center;}.saved-voice-btn{display:block;width:100%;padding:16px;margin-bottom:8px;background:var(--card);border:1px solid var(--border);border-radius:8px;font-size:16px;cursor:pointer;transition:all 0.2s;}.saved-voice-btn:hover{border-color:var(--accent);background:rgba(0,122,255,0.05);}.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:2000;}.modal-overlay.hidden{display:none;}.modal{background:white;border-radius:12px;width:90%;max-width:360px;overflow:hidden;}.modal-header{background:var(--accent);color:white;padding:16px;font-weight:600;font-size:18px;}.modal-body{padding:16px;}.modal-label{display:block;font-size:14px;color:var(--text2);margin-bottom:6px;}.modal-input{width:100%;padding:12px;font-size:16px;border:1px solid var(--border);border-radius:8px;margin-bottom:16px;}.modal-input:focus{outline:none;border-color:var(--accent);}.modal-actions{display:flex;gap:8px;justify-content:flex-end;}.modal-btn{padding:10px 20px;border:none;border-radius:6px;font-size:14px;cursor:pointer;}.modal-btn.cancel{background:var(--group-bg);color:var(--text);}.modal-btn.delete{background:var(--danger);color:white;}.modal-btn.save{background:var(--accent);color:white;}.phrase-btn.long-pressing{transform:scale(1.05);box-shadow:0 4px 16px rgba(0,0,0,0.2);}</style></head><body><div class="voice-load-screen" id="voiceLoadScreen"><h1>HTMU TTS</h1><p>Load a voice to get started</p><div class="upload-area" id="uploadArea"><div class="upload-icon">üì¶</div><div class="upload-text">Drop .htmuvoice file here</div><div class="upload-hint">or click to browse</div></div><input type="file" id="voiceFileInput" accept=".htmuvoice"></div><div class="loading-overlay hidden" id="loadingOverlay"><div class="spinner"></div><div class="loading-text" id="loadingText">Loading voice...</div></div><header class="header"><div class="input-row"><div class="input-wrapper"><textarea class="text-input" id="textInput" placeholder="Build your sentence..." rows="1" disabled></textarea><div class="suggestions" id="suggestions"></div></div><button class="speak-btn" id="speakBtn" disabled title="Speak all">üîä</button><button class="clear-btn" id="clearBtn" title="Clear all">‚úï</button></div><div class="toolbar"><button class="toolbar-btn active" id="btnPhrases">Phrases</button><button class="toolbar-btn" id="btnHistory">History</button></div></header><nav class="breadcrumb" id="breadcrumb"><span class="breadcrumb-item">üè†</span></nav><main class="phrase-grid" id="phraseGrid"></main><footer class="status-bar"><span id="statusText">No voice loaded</span><button class="change-voice-btn" id="changeVoiceBtn">Change Voice</button></footer><div class="modal-overlay hidden" id="editModal"><div class="modal"><div class="modal-header">Edit phrase</div><div class="modal-body"><label class="modal-label">Label:</label><input type="text" class="modal-input" id="editPhraseText" placeholder="Enter phrase text"><div class="modal-actions"><button class="modal-btn cancel" id="editCancel">Cancel</button><button class="modal-btn delete" id="editDelete">Delete</button><button class="modal-btn save" id="editSave">Save</button></div></div></div></div><script>const APP={tts:null,phrases:null,currentPath:[],history:[],isGenerating:false,audioCtx:null,currentSource:null,allPhrases:[],voiceName:null,db:null,};const DB_NAME='HTMU_TTS';const DB_VERSION=1;const VOICE_STORE='voices';async function initDB(){return new Promise((resolve,reject)=>{const request=indexedDB.open(DB_NAME,DB_VERSION);request.onerror=()=>reject(request.error);request.onsuccess=()=>{APP.db=request.result;resolve(APP.db);};request.onupgradeneeded=(event)=>{const db=event.target.result;if (!db.objectStoreNames.contains(VOICE_STORE)){db.createObjectStore(VOICE_STORE,{keyPath:'name'});}};});}async function saveVoiceToStorage(name,fileData){return new Promise((resolve,reject)=>{const tx=APP.db.transaction(VOICE_STORE,'readwrite');const store=tx.objectStore(VOICE_STORE);if (navigator.storage&&navigator.storage.persist){navigator.storage.persist().then(granted=>{console.log('Persistent storage:',granted ? 'granted':'denied');});}const request=store.put({name,data:fileData,savedAt:Date.now()});request.onsuccess=()=>resolve();request.onerror=()=>reject(request.error);});}async function loadVoiceFromStorage(name){return new Promise((resolve,reject)=>{const tx=APP.db.transaction(VOICE_STORE,'readonly');const store=tx.objectStore(VOICE_STORE);const request=store.get(name);request.onsuccess=()=>resolve(request.result);request.onerror=()=>reject(request.error);});}async function getSavedVoices(){return new Promise((resolve,reject)=>{const tx=APP.db.transaction(VOICE_STORE,'readonly');const store=tx.objectStore(VOICE_STORE);const request=store.getAllKeys();request.onsuccess=()=>resolve(request.result);request.onerror=()=>reject(request.error);});}async function deleteVoiceFromStorage(name){return new Promise((resolve,reject)=>{const tx=APP.db.transaction(VOICE_STORE,'readwrite');const store=tx.objectStore(VOICE_STORE);const request=store.delete(name);request.onsuccess=()=>resolve();request.onerror=()=>reject(request.error);});}const voiceLoadScreen=document.getElementById('voiceLoadScreen');const uploadArea=document.getElementById('uploadArea');const voiceFileInput=document.getElementById('voiceFileInput');const loadingOverlay=document.getElementById('loadingOverlay');const loadingText=document.getElementById('loadingText');const textInput=document.getElementById('textInput');const speakBtn=document.getElementById('speakBtn');const clearBtn=document.getElementById('clearBtn');const breadcrumb=document.getElementById('breadcrumb');const phraseGrid=document.getElementById('phraseGrid');const statusText=document.getElementById('statusText');const suggestions=document.getElementById('suggestions');const btnPhrases=document.getElementById('btnPhrases');const btnHistory=document.getElementById('btnHistory');const changeVoiceBtn=document.getElementById('changeVoiceBtn');const editModal=document.getElementById('editModal');const editPhraseText=document.getElementById('editPhraseText');const editCancel=document.getElementById('editCancel');const editDelete=document.getElementById('editDelete');const editSave=document.getElementById('editSave');const LONG_PRESS_DURATION=800;let longPressTimer=null;let editingPhraseIndex=null;let editingGroupPath=[];async function loadVoiceFile(fileOrBuffer,fileName){loadingOverlay.classList.remove('hidden');loadingText.textContent='Preparing voice...';const voiceName=fileName||(fileOrBuffer.name ? fileOrBuffer.name.replace('.htmuvoice',''):'voice');const isFile=fileOrBuffer instanceof File;try{let zipData;if (isFile){zipData=await fileOrBuffer.arrayBuffer();await saveVoiceToStorage(voiceName,zipData);console.log('Voice saved to storage:',voiceName);}else{zipData=fileOrBuffer;}loadingText.textContent='Opening voice package...';const zip=await JSZip.loadAsync(zipData);const files={};let fileCount=0;const totalFiles=Object.keys(zip.files).filter(n=>!zip.files[n].dir).length;for (const[name,zipEntry]of Object.entries(zip.files)){if (!zipEntry.dir){fileCount++;const baseName=name.split('/').pop();loadingText.textContent=`Loading voice(${Math.round(fileCount/totalFiles*100)}%)...`;if (baseName.endsWith('.js')){files[baseName]=await zipEntry.async ('string');}else{files[baseName]=await zipEntry.async ('arraybuffer');}}}const required=['sherpa-onnx-tts.js','sherpa-onnx-wasm-main-tts.js','sherpa-onnx-wasm-main-tts.wasm','sherpa-onnx-wasm-main-tts.data'];for (const req of required){if (!files[req]){throw new Error(`Voice package is incomplete`);}}loadingText.textContent='Starting voice engine...';const wasmBlob=new Blob([files['sherpa-onnx-wasm-main-tts.wasm']],{type:'application/wasm'});const dataBlob=new Blob([files['sherpa-onnx-wasm-main-tts.data']],{type:'application/octet-stream'});const wasmUrl=URL.createObjectURL(wasmBlob);const dataUrl=URL.createObjectURL(dataBlob);let glueCode=files['sherpa-onnx-wasm-main-tts.js'];window.Module={locateFile:function (path){if (path.endsWith('.wasm'))return wasmUrl;if (path.endsWith('.data'))return dataUrl;return path;},onRuntimeInitialized:function (){console.log('WASM initialized');loadingText.textContent='Almost ready...';try{APP.tts=createOfflineTts(Module);console.log('TTS ready');loadingOverlay.classList.add('hidden');voiceLoadScreen.classList.add('hidden');textInput.disabled=false;speakBtn.disabled=false;statusText.textContent='Ready';APP.voiceName=voiceName;loadPhrases();}catch(error){console.error('TTS creation failed:',error);loadingText.textContent='Failed to load voice. Please try again.';}}};const ttsScript=document.createElement('script');ttsScript.textContent=files['sherpa-onnx-tts.js'];document.head.appendChild(ttsScript);const glueScript=document.createElement('script');glueScript.textContent=glueCode;document.head.appendChild(glueScript);}catch(error){console.error('Failed to load voice:',error);loadingOverlay.classList.add('hidden');alert('Failed to load voice:'+error.message);}}async function loadPhrases(){try{const response=await fetch('default.json');APP.phrases=await response.json();APP.allPhrases=getAllPhrases(APP.phrases);renderPhrases();}catch(error){console.error('Failed to load phrases:',error);APP.phrases={phrases:[{type:'phrase',text:'Hello'}],groups:{}};APP.allPhrases=['Hello'];renderPhrases();}}function getAllPhrases(data){const phrases=[];if (data.phrases){data.phrases.forEach(item=>{if (item.type==='phrase')phrases.push(item.text);});}if (data.groups){Object.values(data.groups).forEach(group=>{if (group.phrases){group.phrases.forEach(item=>{if (item.type==='phrase')phrases.push(item.text);});}});}phrases.push(...APP.history);return[...new Set(phrases)];}function showSuggestions(query){if (!query||query.length<2){suggestions.classList.remove('active');return;}const q=query.toLowerCase();const matches=APP.allPhrases .filter(p=>p.toLowerCase().includes(q)).slice(0,8);if (matches.length===0){suggestions.classList.remove('active');return;}suggestions.innerHTML=matches.map(text=>{const highlighted=text.replace(new RegExp(`(${query})`,'gi'),'<mark>$1</mark>');return `<div class="suggestion-item" data-text="${text}">${highlighted}</div>`;}).join('');suggestions.classList.add('active');}function hideSuggestions(){suggestions.classList.remove('active');}function getCurrentItems(){if (APP.currentPath.length===0){return APP.phrases.phrases;}const groupName=APP.currentPath[APP.currentPath.length-1];const group=APP.phrases.groups[groupName];return group ? group.phrases:[];}function renderBreadcrumb(){breadcrumb.innerHTML='';const homeBtn=document.createElement('span');homeBtn.className='breadcrumb-item';homeBtn.textContent='üè†';homeBtn.onclick=()=>{APP.currentPath=[];renderPhrases();};breadcrumb.appendChild(homeBtn);APP.currentPath.forEach((name,i)=>{const sep=document.createElement('span');sep.className='breadcrumb-sep';sep.textContent=' ‚Ä∫ ';breadcrumb.appendChild(sep);const btn=document.createElement('span');btn.className='breadcrumb-item';btn.textContent=name;btn.onclick=()=>{APP.currentPath=APP.currentPath.slice(0,i+1);renderPhrases();};breadcrumb.appendChild(btn);});}function renderPhrases(){renderBreadcrumb();phraseGrid.innerHTML='';const items=getCurrentItems();items.forEach((item,idx)=>{const btn=document.createElement('button');btn.className='phrase-btn'+(item.type==='group' ? ' group':'');if (item.type==='group'){btn.innerHTML=`<span class="text">${item.name}</span>`;btn.onclick=()=>{APP.currentPath.push(item.name);renderPhrases();};}else{btn.innerHTML=`<span class="text">${item.text}</span>`;setupLongPress(btn,item.text,idx);}phraseGrid.appendChild(btn);});}function setupLongPress(btn,text,idx){let pressTimer=null;let isLongPress=false;const startPress=(e)=>{isLongPress=false;btn.classList.add('long-pressing');pressTimer=setTimeout(()=>{isLongPress=true;btn.classList.remove('long-pressing');if (navigator.vibrate)navigator.vibrate(50);openEditModal(text,idx);},LONG_PRESS_DURATION);};const endPress=(e)=>{btn.classList.remove('long-pressing');clearTimeout(pressTimer);if (!isLongPress){appendPhrase(text);}isLongPress=false;};const cancelPress=()=>{btn.classList.remove('long-pressing');clearTimeout(pressTimer);};btn.addEventListener('mousedown',startPress);btn.addEventListener('mouseup',endPress);btn.addEventListener('mouseleave',cancelPress);btn.addEventListener('touchstart',(e)=>{e.preventDefault();startPress(e);});btn.addEventListener('touchend',endPress);btn.addEventListener('touchcancel',cancelPress);}function openEditModal(text,idx){editingPhraseIndex=idx;editingGroupPath=[...APP.currentPath];editPhraseText.value=text;editModal.classList.remove('hidden');editPhraseText.focus();}function closeEditModal(){editModal.classList.add('hidden');editingPhraseIndex=null;editingGroupPath=[];}function saveEditedPhrase(){const newText=editPhraseText.value.trim();if (!newText)return;let items;if (editingGroupPath.length===0){items=APP.phrases.phrases;}else{const groupName=editingGroupPath[editingGroupPath.length-1];items=APP.phrases.groups[groupName].phrases;}if (items[editingPhraseIndex]){items[editingPhraseIndex].text=newText;}closeEditModal();renderPhrases();}function deletePhrase(){let items;if (editingGroupPath.length===0){items=APP.phrases.phrases;}else{const groupName=editingGroupPath[editingGroupPath.length-1];items=APP.phrases.groups[groupName].phrases;}items.splice(editingPhraseIndex,1);closeEditModal();renderPhrases();}function appendPhrase(newPhrase){const currentText=textInput.value;if (currentText.length===0){textInput.value=newPhrase;}else{const lastChar=currentText.slice(-1);if (lastChar===' '){textInput.value=currentText+newPhrase;}else{textInput.value=currentText+' '+newPhrase;}}textInput.style.height='auto';textInput.style.height=Math.min(textInput.scrollHeight,100)+'px';speak(newPhrase);}async function speak(text){if (!APP.tts||!text.trim()||APP.isGenerating)return;APP.isGenerating=true;speakBtn.disabled=true;statusText.textContent='Generating...';try{const audio=APP.tts.generate({text,sid:0,speed:1.0});playAudio(audio.samples,audio.sampleRate);addToHistory(text);statusText.textContent='Playing...';}catch(error){console.error('Generation failed:',error);statusText.textContent='Error:'+error.message;}finally{APP.isGenerating=false;speakBtn.disabled=false;}}function playAudio(samples,sampleRate){if (!APP.audioCtx){APP.audioCtx=new (window.AudioContext||window.webkitAudioContext)({sampleRate});}const buffer=APP.audioCtx.createBuffer(1,samples.length,sampleRate);buffer.getChannelData(0).set(samples);const source=APP.audioCtx.createBufferSource();source.buffer=buffer;source.connect(APP.audioCtx.destination);source.onended=()=>{statusText.textContent='Ready';};source.start();}function addToHistory(text){APP.history=APP.history.filter(h=>h!==text);APP.history.unshift(text);APP.history=APP.history.slice(0,20);localStorage.setItem('htmu_history',JSON.stringify(APP.history));}function renderHistory(){phraseGrid.innerHTML='';breadcrumb.innerHTML='<span class="breadcrumb-item">üìú History</span>';if (APP.history.length===0){const empty=document.createElement('div');empty.style.cssText='grid-column:1/-1;text-align:center;color:#999;padding:40px;';empty.textContent='No history yet';phraseGrid.appendChild(empty);return;}APP.history.forEach(text=>{const btn=document.createElement('button');btn.className='phrase-btn';btn.innerHTML=`<span class="text">${text}</span>`;btn.onclick=()=>{appendPhrase(text);};phraseGrid.appendChild(btn);});}uploadArea.onclick=()=>voiceFileInput.click();uploadArea.ondragover=(e)=>{e.preventDefault();uploadArea.classList.add('dragging');};uploadArea.ondragleave=()=>{uploadArea.classList.remove('dragging');};uploadArea.ondrop=(e)=>{e.preventDefault();uploadArea.classList.remove('dragging');const file=e.dataTransfer.files[0];if (file&&file.name.endsWith('.htmuvoice')){loadVoiceFile(file);}else{alert('Please drop a .htmuvoice file');}};voiceFileInput.onchange=(e)=>{const file=e.target.files[0];if (file)loadVoiceFile(file);};speakBtn.onclick=()=>{const text=textInput.value.trim();if (text)speak(text);};clearBtn.onclick=()=>{textInput.value='';textInput.focus();stopAudio();};function stopAudio(){if (APP.currentSource){try{APP.currentSource.stop();}catch(e){}APP.currentSource=null;}APP.isGenerating=false;speakBtn.disabled=false;statusText.textContent='Ready';}textInput.addEventListener('keydown',(e)=>{if (e.key==='Enter'&&!e.shiftKey){e.preventDefault();const text=textInput.value.trim();if (text)speak(text);}});textInput.addEventListener('input',()=>{textInput.style.height='auto';textInput.style.height=Math.min(textInput.scrollHeight,100)+'px';showSuggestions(textInput.value.trim());});textInput.addEventListener('blur',()=>{setTimeout(hideSuggestions,200);});suggestions.addEventListener('click',(e)=>{const item=e.target.closest('.suggestion-item');if (item){const text=item.dataset.text;textInput.value=text;hideSuggestions();}});btnPhrases.onclick=()=>{btnPhrases.classList.add('active');btnHistory.classList.remove('active');renderPhrases();};btnHistory.onclick=()=>{btnHistory.classList.add('active');btnPhrases.classList.remove('active');renderHistory();};changeVoiceBtn.onclick=()=>{location.reload();};editCancel.onclick=closeEditModal;editSave.onclick=saveEditedPhrase;editDelete.onclick=deletePhrase;editModal.onclick=(e)=>{if (e.target===editModal)closeEditModal();};editPhraseText.addEventListener('keydown',(e)=>{if (e.key==='Enter'){e.preventDefault();saveEditedPhrase();}else if (e.key==='Escape'){closeEditModal();}});APP.history=JSON.parse(localStorage.getItem('libby_history')||'[]');async function init(){console.log('HTMU TTS initializing...');try{await initDB();const savedVoices=await getSavedVoices();console.log('Saved voices:',savedVoices);if (savedVoices.length>0){const voiceName=savedVoices[0];const voiceData=await loadVoiceFromStorage(voiceName);if (voiceData&&voiceData.data){console.log('Loading saved voice:',voiceName);await loadVoiceFile(voiceData.data,voiceName);return;}}console.log('No saved voice,showing upload screen');showSavedVoicesList(savedVoices);}catch(error){console.error('Init error:',error);}}function showSavedVoicesList(savedVoices){if (savedVoices.length>0){const listHtml=savedVoices.map(name=>`<button class="saved-voice-btn" data-name="${name}">üì¶ ${name}</button>`).join('');uploadArea.insertAdjacentHTML('beforebegin',`<div class="saved-voices"><p style="margin-bottom:12px;font-size:14px;color:#666;">Saved voices:</p>${listHtml}<p style="margin:16px 0;font-size:14px;color:#999;">‚Äî or ‚Äî</p></div>`);document.querySelectorAll('.saved-voice-btn').forEach(btn=>{btn.onclick=async ()=>{const name=btn.dataset.name;const voiceData=await loadVoiceFromStorage(name);if (voiceData&&voiceData.data){await loadVoiceFile(voiceData.data,name);}};});}}init();</script></body></html>
